<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <style>

   *{
       padding: 0;
       margin: 0;
       box-sizing: border-box;
   }

   body{
       margin: 300px 0 0 0;
       display: flex;
       justify-content: center;
       align-items: center;
       min-height: 700px;
       background: #e63946;
       color: #f1faee;
   }

    .input-wrapper{
        width: 100%;
        display: flex;
        justify-content: center;
        align-items: center;


    }

        table{
            text-align: center;
            border: 15px solid #457b9d;
            border-radius: 15px;
            padding: 10px 40px;
        }

         th{
            border: 1px solid #a8dadc80;
            padding: 20px 10px;
            font-size: 25px;
            font-family: monospace;

        }

        option{
            border: 1px solid #a8dadc80;
            font-size: 25px;
            font-family: monospace;

        }

       

        input{
            border: 1px solid black;

            text-align: center;
            font-size: 25px;
            background: #1d3557;
            color: #f1faee;
            border-radius: 20px;
            padding: 5px 10px;
        }

        button{
            padding: 20px 30px;
            font-size: 25px;
            font-family: monospace;
            background: rgb(241, 241, 241);
            border: 1px solid rgb(199, 199, 199);;
            border-radius: 20px;
            transition: all 0.25s;
        }

        button:hover{
            background: rgb(92, 92, 92);
            color: white;
        }

        .calulate-cell{
            border: none;
        }

        .functionCell{
            padding: 30px 20px;
            border: none
        }

        #savingsCellWrapper{
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            
        }

        #savingsCell{
            margin: 30px 0;
        }
    </style>

    <div class="main-wrapper">
        <div class="graph-wrapper"></div>

        <div class="input-wrpper">

            <table>
                <tr>
                    <th> Income</th>
                    <th><input class="inputIncome" type="text" placeholder="Income"></th>
                    <th>
                        <select name="" id="WeeklyIncomeSelect">
                            <option value="Weekly">Weekly</option>
                            <option value="Fortnightly">Fortnightly</option>
                            <option value="Monthly">Monthly</option>
                            <option value="Yearly">Yearly</option>
                        </select>
                    </th>
                </tr>
                <tr>
                    <th>Weekly Grocery</th>
                    <th><input class="inputGroceryExpense expense" type="text" placeholder="Grocery Expense"></th>
                    <th>
                        <!-- <select name="" id="WeeklyGrocerySelect" onchange="optionFunction(event)">
                            <option value="Weekly">Weekly</option>
                            <option value="Fortnightly">Fortnightly</option>
                            <option value="Monthly">Monthly</option>
                            <option value="Yearly">Yearly</option>
                        </select> -->
                    </th>
                </tr>
                <tr>
                    <th>Weekly Utilities</th>
                    <th><input class="inputUtilityExpense expense" type="text" placeholder="Utility Expense" ></th>
                    <th>
                        <!-- <select name="" id="WeeklyUtilitiesSelect" onchange="optionFunction(event)">
                            <option value="Weekly">Weekly</option>
                            <option value="Fortnightly">Fortnightly</option>
                            <option value="Monthly">Monthly</option>
                            <option value="Yearly">Yearly</option>
                        </select> -->
                    </th>
                </tr>
                <tr>
                    <th>Weekly Personal</th>
                    <th><input class="inputPersonalExpense expense" type="text" placeholder="Personal Expense" ></th>
                    <th>
                        <!-- <select name="" id="WeeklyPersonalSelect" onchange="optionFunction(event)">
                            <option value="Weekly">Weekly</option>
                            <option value="Fortnightly">Fortnightly</option>
                            <option value="Monthly">Monthly</option>
                            <option value="Yearly">Yearly</option>
                        </select> -->
                    </th>
                </tr>
                    <th>Weekly Charity</th>
                    <th><input class="inputChairtyExpense expense" type="text" placeholder="Charity Expense" ></th>
                    <th>
                        <!-- <select name="" id="WeeklyCharitySelect" onchange="optionFunction(event)">
                            <option value="Weekly">Weekly</option>
                            <option value="Fortnightly">Fortnightly</option>
                            <option value="Monthly">Monthly</option>
                            <option value="Yearly">Yearly</option>
                        </select> -->
                    </th>


            </tr>

                <tr class="functionCellWrapper">
                    <th class="functionCell"><p class="savingOutput"></p></th>
                    <th class="functionCell"><p class="totalExpensesOutput"></p></th>
                    <th class="functionCell"><p class="incomeOutput"></p></p></th>
                </tr>
                <tr>
                    <th class="calulate-cell"></th>
                    <th class="calulate-cell"> <button class="calculateButton">Calculate</button></th>
                    <th class="calulate-cell"></th>

                </tr>

                <tr>

                </tr>


            </table>
            <div id="savingsCellWrapper">
                <div>
                    <input id="savingsInput"type="text" placeholder="Set a Yearly Savings Goal">
                    
                    <button id="savingsSetButton">Set</button>    
                </div>
                <div>

                    <div id="savingsCell">
                    </div>

                
                </div>
            </div>

        </div>
        
        <script>

            var expenseInput = document.getElementsByClassName("expense")
            var inputIncome = document.querySelector('.inputIncome');
            var inputGroceryExpense = document.querySelector('.inputGroceryExpense');
            var inputUtilityExpense = document.querySelector('.inputUtilityExpense');
            var inputPersonalExpense = document.querySelector('.inputPersonalExpense');
            var inputChairtyExpense = document.querySelector('.inputChairtyExpense');
            var expenseInput = document.querySelectorAll('.expense')

            var totalExpensesOutput = document.querySelector('.totalExpensesOutput');
            var savingOutput = document.querySelector('.savingOutput');
            var incomeOutput = document.querySelector('.incomeOutput');

            var WeeklyIncomeSelect = document.querySelector('#WeeklyIncomeSelect');
            var WeeklyGrocerySelect = document.querySelector('#WeeklyIncomeSelect');
            var WeeklyUtilitiesSelect = document.querySelector('#WeeklyIncomeSelect');
            var WeeklyPersonalSelect = document.querySelector('#WeeklyIncomeSelect');
            var WeeklyCharitySelect = document.querySelector('#WeeklyIncomeSelect');

            var savingsInput = document.querySelector('#savingsInput');
            var savingsSetButton = document.querySelector('#savingsSetButton')
            var savingsCell = document.querySelector('#savingsCell')


            var select = document.querySelector('select');
            var calculateButton = document.querySelector('button');

            savingsSetButton.addEventListener('click', function(){
                // console.log(savingsInput.value)

                var totalExpenses = parseInt(inputGroceryExpense.value) +  parseInt(inputUtilityExpense.value) + parseInt(inputPersonalExpense.value) + parseInt(inputChairtyExpense.value);
                var savings =  inputIncome.value - totalExpenses;

                if (inputIncome.value === null || inputIncome.value === "", inputGroceryExpense.value === null || inputGroceryExpense.value === "", inputUtilityExpense.value == null || inputUtilityExpense.value == "", inputPersonalExpense.value == null || inputPersonalExpense.value == "", inputChairtyExpense.value == null || inputChairtyExpense.value == "") {
                    alert("Please Fill All Required Field");
                    return false;
                } else {

                    totalExpensesOutput.value = "$ " + totalExpenses;
                    savingOutput.value =  savings;
                    incomeOutput.value = "$ " + parseInt(savings)  * 52 + " Yearly";


                    //    console.log(totalExpensesOutput.value)
                    //    console.log(savingOutput.value)
                    //    console.log(totalExpensesOutput.value)
                    var SavingsGoalDifference = parseInt(savingsInput.value) / parseInt(savingOutput.value);
                    var roundedTwoDPSavingsGoalDifference =  SavingsGoalDifference.toFixed(2)
                    var roundedSavingsGoalDifference =  SavingsGoalDifference.toFixed(0)

                    if (savingsInput.value === null || savingsInput.value === ""){
                        alert("Please Fill All Required Field");
                    return false;
                    } else {

                        const getSundayFromWeekNum = (weekNum, year) => {
                            const sunday = new Date(year, 0, (1 + (weekNum - 1) * 7));
                            while (sunday.getDay() !== 0) {
                                sunday.setDate(sunday.getHours() - 1);
                            }
                            return sunday;
                            }

                        var goalSetTo = document.createElement('h2');
                        var weeksToGoal = document.createElement ('h1')
                        // var predictedDate = document.createElement('h1')

                        
                        savingsCell.appendChild(goalSetTo);
                        savingsCell.appendChild(weeksToGoal);
                        // savingsCell.appendChild(predictedDate)
                        goalSetTo.innerHTML = "Current goal set to " + "$" + savingsInput.value;
                        weeksToGoal.innerHTML = "It will take you " + roundedTwoDPSavingsGoalDifference + " Weeks to reach your savings goal";

                        
                        savingsInput.value = '';
                    
                    }
                }
            })

             calculateButton.addEventListener('click', function() {

                var totalExpenses = parseInt(inputGroceryExpense.value) +  parseInt(inputUtilityExpense.value) + parseInt(inputPersonalExpense.value) + parseInt(inputChairtyExpense.value);
                var savings =  inputIncome.value - totalExpenses;

                if (inputIncome.value === null || inputIncome.value === "", inputGroceryExpense.value === null || inputGroceryExpense.value === "", inputUtilityExpense.value == null || inputUtilityExpense.value == "", inputPersonalExpense.value == null || inputPersonalExpense.value == "", inputChairtyExpense.value == null || inputChairtyExpense.value == "") {
                    alert("Please Fill All Required Field");
                    return false;
                } else {
                    totalExpensesOutput.innerHTML = "$ " + totalExpenses;
                    savingOutput.innerHTML = "$ " + savings + " weekly";
                    incomeOutput.innerHTML = "$ " + parseInt(savings)  * 52 + " Yearly";
                }

                var totalExpenses = parseInt(inputGroceryExpense.value) +  parseInt(inputUtilityExpense.value) + parseInt(inputPersonalExpense.value) + parseInt(inputChairtyExpense.value);
                var savings =  inputIncome.value - totalExpenses;

                if (inputIncome.value === null || inputIncome.value === "", inputGroceryExpense.value === null || inputGroceryExpense.value === "", inputUtilityExpense.value == null || inputUtilityExpense.value == "", inputPersonalExpense.value == null || inputPersonalExpense.value == "", inputChairtyExpense.value == null || inputChairtyExpense.value == "") {
                    alert("Please Fill All Required Field");
                    return false;
                } else {

                    if (WeeklyIncomeSelect.value === "Weekly"){
                    incomeOutput.innerHTML = "$ " + parseInt(savings)  * 52 + " Yearly"
                } else if(WeeklyIncomeSelect.value === "Fortnightly"){
                    incomeOutput.innerHTML = "$ " + parseInt(savings)  * 26 + " Yearly"
                } else if(WeeklyIncomeSelect.value === "Monthly"){
                    incomeOutput.innerHTML = "$ " + parseInt(savings)  * 12 + " Yearly"
                } else if(WeeklyIncomeSelect.value === "Yearly"){
                    incomeOutput.innerHTML = "$ " + parseInt(savings)  * 1 + " Yearly"
                } 
                
                    totalExpensesOutput.innerHTML = "$ " + totalExpenses;
                    savingOutput.innerHTML = "$ " + savings + " weekly";
                    incomeOutput.innerHTML = "$ " + parseInt(savings)  * 52 + " Yearly";
                }
             })

             WeeklyIncomeSelect.addEventListener('change', function() {

                var totalExpenses = parseInt(inputGroceryExpense.value) +  parseInt(inputUtilityExpense.value) + parseInt(inputPersonalExpense.value) + parseInt(inputChairtyExpense.value);
                var savings =  inputIncome.value - totalExpenses;

                if (inputIncome.value === null || inputIncome.value === "", inputGroceryExpense.value === null || inputGroceryExpense.value === "", inputUtilityExpense.value == null || inputUtilityExpense.value == "", inputPersonalExpense.value == null || inputPersonalExpense.value == "", inputChairtyExpense.value == null || inputChairtyExpense.value == "") {
                    alert("Please Fill All Required Field");
                    return false;
                } else if (WeeklyIncomeSelect.value === "Weekly"){
                    incomeOutput.innerHTML = "$ " + parseInt(savings)  * 52 + " Yearly"
                } else if(WeeklyIncomeSelect.value === "Fortnightly"){
                    incomeOutput.innerHTML = "$ " + parseInt(savings)  * 26 + " Yearly"
                } else if(WeeklyIncomeSelect.value === "Monthly"){
                    incomeOutput.innerHTML = "$ " + parseInt(savings)  * 12 + " Yearly"
                } else if(WeeklyIncomeSelect.value === "Yearly"){
                    incomeOutput.innerHTML = "$ " + parseInt(savings)  * 1 + " Yearly"
                } else  {
                    totalExpensesOutput.innerHTML = "$ " + totalExpenses;
                    savingOutput.innerHTML = "$ " + savings + " weekly";
                    incomeOutput.innerHTML = "$ " + parseInt(savings)  * 52 + " Yearly";
                }
             });

        </script>   
    </div>
</body>
</html>